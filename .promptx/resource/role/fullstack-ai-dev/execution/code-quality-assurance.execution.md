<execution>
  <constraint>
    ## 代码质量的客观约束
    - **TypeScript严格模式**：必须启用strict模式，零any类型使用
    - **ESLint规则遵循**：代码必须通过项目配置的ESLint检查
    - **测试覆盖率要求**：核心业务逻辑测试覆盖率 ≥ 80%
    - **性能基准约束**：页面首屏加载时间 ≤ 2s，API响应时间 ≤ 500ms
    - **安全性检查强制**：敏感信息不得硬编码，API密钥必须环境变量管理
  </constraint>

  <rule>
    ## 代码质量强制规则
    - **防改错优先级**：代码修改前的完整性检查优先于功能实现
    - **单一职责强制**：每个函数/组件只负责一个明确的功能
    - **接口契约不变**：已定义的API接口签名和数据结构不得破坏性修改
    - **错误边界必须**：所有组件必须有适当的错误边界和异常处理
    - **性能回归零容忍**：任何导致性能明显下降的修改必须回滚优化
  </rule>

  <guideline>
    ## 代码质量指导原则
    - **可读性优于简洁性**：代码的意图表达比代码行数更重要
    - **一致性优于个人喜好**：遵循项目既有的代码风格和模式
    - **显式优于隐式**：明确的类型定义和参数校验胜过隐式推导
    - **组合优于继承**：优先使用组合模式而非复杂的继承关系
  </guideline>

  <process>
    ## 代码质量保证流程
    
    ### Step 1: 开发前质量准备
    ```mermaid
    flowchart TD
        A[接收开发任务] --> B[阅读相关代码]
        B --> C[理解现有架构]
        C --> D[确认质量标准]
        D --> E[制定实现方案]
        E --> F[开始编码实现]
    ```
    
    ### Step 2: 开发中质量控制
    ```mermaid
    flowchart TD
        A[编写核心逻辑] --> B[添加类型定义]
        B --> C[实现错误处理]
        C --> D[编写单元测试]
        D --> E[运行质量检查]
        E --> F{质量检查通过?}
        F -->|否| G[问题修复]
        F -->|是| H[功能集成测试]
        G --> E
    ```
    
    ### Step 3: 完成后质量验证
    - 代码审查检查清单执行
    - 性能基准测试和回归检测
    - 安全性扫描和敏感信息检查
    - 文档更新和接口变更记录
    
    ### 防改错检查模板
    ```typescript
    // 修改前必须确认的检查点
    interface PreModificationChecklist {
      // 1. 完整理解现有代码
      currentImplementation: {
        purpose: string;           // 当前代码的作用
        dependencies: string[];    // 依赖的其他模块
        sideEffects: string[];     // 可能产生的副作用
      };
      
      // 2. 明确修改边界
      modificationScope: {
        filesToModify: string[];   // 要修改的文件
        functionsToChange: string[]; // 要修改的函数
        protectedAreas: string[];  // 绝对不能修改的区域
      };
      
      // 3. 风险评估
      riskAssessment: {
        breakingChanges: boolean;  // 是否有破坏性修改
        affectedComponents: string[]; // 可能影响的组件
        rollbackPlan: string;      // 回滚计划
      };
    }
    ```
    
    ### 代码质量自检清单
    - [ ] TypeScript类型定义完整无any
    - [ ] 函数和变量命名清晰表意
    - [ ] 错误处理覆盖所有异常路径
    - [ ] 单元测试覆盖核心逻辑
    - [ ] 性能敏感操作有优化考虑
    - [ ] 无安全漏洞和敏感信息泄露
    - [ ] 代码结构清晰易维护
    - [ ] 注释充分解释复杂逻辑
  </process>

  <criteria>
    ## 代码质量评价标准
    
    ### 静态质量指标
    - ✅ TypeScript编译无错误无警告
    - ✅ ESLint检查通过零违规
    - ✅ 代码重复率 ≤ 5%
    - ✅ 圈复杂度 ≤ 10
    
    ### 动态质量指标
    - ✅ 单元测试通过率 100%
    - ✅ 集成测试通过率 ≥ 95%
    - ✅ 页面加载性能达标
    - ✅ 内存泄漏检测无问题
    
    ### 可维护性指标
    - ✅ 新开发者理解代码时间 ≤ 30分钟
    - ✅ 功能修改影响范围可控
    - ✅ 文档与代码实现一致
    - ✅ 代码评审反馈积极正面
  </criteria>
</execution>